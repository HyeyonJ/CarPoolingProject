<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">        
<mapper namespace="project.carPooling.passenger.mapper.PassengerInfoMapper">

	<!-- public Integer insert(PassengerInfo passsenger); -->
	<insert id="insert" parameterType="PassengerInfo">
		<selectKey keyProperty="pUserIdx, pUserGender" resultType="hashmap" order="BEFORE">
			SELECT p_idx_seq.nextVal as pUserIdx,
					CASE WHEN SUBSTR(#{pIdNum2}, 1, 1) IN ('1', '3') THEN 'M'
				    	ELSE 'F'
				    	END pUserGender
			FROM dual
		</selectKey>
		insert into passenger
		values(#{pUserIdx}, #{pUserType}, #{pUserEmail}, #{pUserPw}, #{pUserName}, #{pUserTel}
		, #{pUserGender}, 'false', #{pUserVcode}, #{pIdNum1}, #{pIdNum2}, 'false')
	</insert>
	
	<!-- public PassengerInfo selectById(int id); -->
	
	<!-- public PassengerInfo selectByLoginId(String loginId); -->
	<select id="selectByLoginId" resultType="PassengerInfo">
		select * from passenger
		where p_userEmail = #{pUserEmail}
	</select>
	
	<!-- public List<PassengerInfo> selectAll(); -->
	
	<!-- public void deleteAll(); -->
	
	<!-- public PassengerInfo update(PassengerInfo passenger); -->
	
	
</mapper>